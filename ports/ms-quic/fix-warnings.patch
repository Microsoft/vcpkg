diff --git a/CMakeLists.txt b/CMakeLists.txt
index 36e2745..b8a6893 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -183,8 +183,9 @@ set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_DEBUG ${QUIC_OUTPUT_DIR})
 
 set(QUIC_INCLUDE_DIR ${CMAKE_CURRENT_SOURCE_DIR}/src/inc)
 
+add_library(warnings INTERFACE)
 if (WIN32)
-    set(QUIC_WARNING_FLAGS /WX /W4 /sdl CACHE INTERNAL "")
+    target_compile_options(warnings INTERFACE /W4 /sdl)
     set(QUIC_COMMON_FLAGS "")
     if("${CMAKE_CXX_COMPILER_ID}" STREQUAL "MSVC")
         list(APPEND QUIC_COMMON_FLAGS /MP)
@@ -193,13 +194,14 @@ if (WIN32)
 else()
     set(QUIC_COMMON_FLAGS "")
     set(QUIC_COMMON_DEFINES _GNU_SOURCE)
-    set(QUIC_WARNING_FLAGS -Werror -Wall -Wextra -Wformat=2 -Wno-type-limits
+    target_compile_options(warnings INTERFACE
+        -Wall -Wextra -Wformat=2 -Wno-type-limits
         -Wno-unknown-pragmas -Wno-multichar -Wno-missing-field-initializers
-        CACHE INTERNAL "")
+    )
     if (CMAKE_COMPILER_IS_GNUCC AND CMAKE_CXX_COMPILER_VERSION VERSION_LESS 7.0)
-        list(APPEND QUIC_WARNING_FLAGS -Wno-strict-aliasing)
+        target_compile_options(warnings INTERFACE -Wno-strict-aliasing)
     elseif(CMAKE_CXX_COMPILER_ID MATCHES "Clang")
-        list(APPEND QUIC_WARNING_FLAGS -Wno-missing-braces -Wno-microsoft-anon-tag)
+        target_compile_options(warnings INTERFACE -Wno-missing-braces -Wno-microsoft-anon-tag)
     endif()
 endif()
 
diff --git a/src/inc/CMakeLists.txt b/src/inc/CMakeLists.txt
index 2376777..2ede055 100644
--- a/src/inc/CMakeLists.txt
+++ b/src/inc/CMakeLists.txt
@@ -40,6 +40,3 @@ target_link_libraries(inc INTERFACE Threads::Threads ${CMAKE_DL_LIBS} ${ATOMIC})
 if(WIN32)
     target_link_libraries(inc INTERFACE ws2_32 schannel ntdll bcrypt ncrypt crypt32 iphlpapi advapi32)
 endif()
-
-add_library(warnings INTERFACE)
-target_compile_options(warnings INTERFACE ${QUIC_WARNING_FLAGS})
